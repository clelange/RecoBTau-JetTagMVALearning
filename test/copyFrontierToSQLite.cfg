#!/usr/bin/env cmsRun

process MVAJetTagsSQLiteSave = {
	source = EmptySource {}

	untracked PSet maxEvents = { untracked int32 input = 1 }

	include "FWCore/MessageLogger/data/MessageLogger.cfi"

#	include "RecoBTau/Configuration/data/RecoBTau_FrontierConditions.cff"
	include "RecoBTau/Configuration/data/RecoBTau_FrontierConditions_IntDB.cff"
	replace BTauMVAJetTagComputerRecord.toGet = {
		{
			string record   = "BTauGenericMVAJetTagComputerRcd"
			string tag      = "MVAJetTags_CMSSW_2_0_0_mc"
		}
	}

	es_prefer BTauMVAJetTagComputerRecord = PoolDBESSource { }

	service = PoolDBOutputService {
		string connect = "sqlite_file:MVAJetTagsFakeConditions.db"
		untracked string timetype = "runnumber"
		untracked string BlobStreamerName = "TBufferBlobStreamingService"

		VPSet toPut = {
			{
				string record = "BTauGenericMVAJetTagComputerRcd"
				string tag = "MVAJetTags_CMSSW_2_0_0_mc"
			}
		}

		PSet DBParameters = {
			untracked int32 messageLevel = 0
		}
	}

	module jetTagMVATrainerSave = JetTagMVATrainerSave {
		vstring toCopy = {
			"ImpactParameterMVA",
			"CombinedSVRecoVertex",
			"CombinedSVPseudoVertex",
			"CombinedSVNoVertex",
			"CombinedSVMVARecoVertex",
			"CombinedSVMVAPseudoVertex",
			"CombinedSVMVANoVertex"
		}
		vstring toPut = {}
	}

	endpath outpath = { jetTagMVATrainerSave }
}
